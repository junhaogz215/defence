webpackJsonp([1],{"3UTd":function(e,t){},"3f8G":function(e,t){},"3w8l":function(e,t){},"4Mrq":function(e,t){},"4ouH":function(e,t){},"4zFN":function(e,t){},"Cs/I":function(e,t){},DG1z:function(e,t){},F1ro:function(e,t){},J0tf:function(e,t){},JNsQ:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Layout")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},n,!1,function(e){a("Y76V")},null,null).exports,o=a("XLwt"),i=a.n(o),l=a("mtWM"),c=a.n(l),u=a("Zrlr"),d=a.n(u),f=a("wxAW"),m=a.n(f),p=new(function(){function e(){d()(this,e)}return m()(e,[{key:"trim",value:function(e){return e.replace(/\s*/g,"")}},{key:"install",value:function(e){e.prototype.$utils=this}}]),e}()),h=a("/ocq"),v=a("Xxa5"),g=a.n(v),b=a("exGp"),w=a.n(b),_=a("Dd8w"),x=a.n(_),y="http://45.40.192.128",k=function(e){return c.a.post(y+"/platform/api/user/updatePwd",x()({},e))},I=function(){return c.a.post(y+"/platform/api/user/signOut")},S=function(e,t,a){return c.a.post(y+"/platform/api/user/login",{userName:e,password:t,role:a})},$=function(e,t,a){return c.a.get(y+"/platform/api/teacher/infos",{params:{teacherId:e,page:t,role:a}})},C=function(){return c.a.get(y+"/platform/api/teacher/leaders")},P=function(e){return c.a.post(y+"/platform/api/teacher/registered",x()({},e))},N=function(e){return c.a.post(y+"/platform/api/admin/deleteTeacher",{id:e})},F=function(e){return c.a.post("http://45.40.192.128/platform/api/teacher/update",x()({},e))},T=function(e,t){return c.a.post(y+"/platform/api/subject/add",{subjectName:e,subjectScore:t})},j=function(){return c.a.get(y+"/platform/api/subject/query")},D=function(e,t){return c.a.post(y+"/platform/api/subject/update",{},{params:{id:e,subjectScore:t}})},R=function(e){return c.a.post(y+"/platform/api/subject/delete",{},{params:{id:e}})},L=function(e){return c.a.get(y+"/platform/api/studentUser/query",{params:{studentId:e}})},M=function(e){return c.a.post(y+"/platform/api/admin/deleteTeacher",{id:e})},U=function(e){return c.a.post(y+"/platform/api/studentUser/update",x()({},e))},V=function(e){return c.a.post(y+"/platform/api/studentUser/registered",x()({},e))},z=function(e){return c.a.get(y+"/platform/api/studentUser/infos",{params:e})},G=function(e){return c.a.post(y+"/platform/api/studentScore/updateStatus",{},{params:{ids:e}})},A=function(e,t){return c.a.get(y+"/platform/api/studentScore/teacher",{params:{leaderId:e,page:t}})},E=function(e){return c.a.post(y+"/platform/api/studentScore/add",x()({},e))},B=function(e){return c.a.post(y+"/platform/api/studentScore",{},{params:{ids:e||null},responseType:"blob"})},H=function(e){return c.a.post(y+"/platform/api/studentGroup/dataOutput",{},{params:{teacherId:e},responseType:"blob"})},O=function(e){return c.a.get(y+"/platform/api/studentGroup/delete",{params:{id:e}})},J=function(e,t){return c.a.post(y+"/platform/api/studentGroup/group",{},{params:{teacherId:e,studentIds:t}})},q=function(e,t){return c.a.get(y+"/platform/api/studentGroup/teacher",{params:{teacherId:e,page:t}})},Z=function(){return c.a.get(y+"/platform/api/studentGroup/unGrouped")},Q={data:function(){return{}},created:function(){var e=this;return w()(g.a.mark(function t(){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:!1||e.$router.push({path:"/login"});case 2:case"end":return t.stop()}},t,e)}))()}},W={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],staticClass:"wrapper",attrs:{"element-loading-background":"rgba(255, 255, 255, 0.8)"}})},staticRenderFns:[]};var Y=a("VU/8")(Q,W,!1,function(e){a("OJwc"),a("RPz8"),a("J0tf")},"data-v-2f007717",null).exports,X=a("NYxO"),K=a("woOf"),ee=a.n(K),te=a("mvHQ"),ae=a.n(te),re=a("fZjL"),ne=a.n(re),se={touristRoutes:["/login","/noaccess"],adminRoutes:["/teacherinfo","/studentinfo","/studentgroup","/projectmange","/noaccess","/password"],teacherRoutes:["/studentinfo","/markgrade","/noaccess","/password"],leaderRoutes:["/markgrade","/gradeinfo","/studentinfo","/password","/noaccess"],studentRoutes:["/mygrade","/password","/noaccess"]},oe=function(e){e&&(e.userInfo.isLogin=!1,ne()(e.userInfo.data).map(function(t){e.userInfo.data[t]=""}))},ie=function(e,t,a){var r=[];return a&&!a.isLogin?r=t.touristRoutes.map(function(t){return e.filter(function(e){return e.path===t})[0]}):1==+a.data.role?r=t.adminRoutes.map(function(t){return e.filter(function(e){return e.path===t})[0]}):2==+a.data.role?(r=t.teacherRoutes.map(function(t){return e.filter(function(e){return e.path===t})[0]}),1==+a.data.isLeader&&(r=t.leaderRoutes.map(function(t){return e.filter(function(e){return e.path===t})[0]}))):3==+a.data.role&&(r=t.studentRoutes.map(function(t){return e.filter(function(e){return e.path===t})[0]})),r},le={setUserInfo:function(e,t){t.status?(e.userInfo.isLogin=!0,localStorage.setItem("userInfo",ae()(t)),ee()(e.userInfo.data,t.data)):(localStorage.setItem("userInfo","{}"),oe()),e.menus=ie(qe,se,e.userInfo),console.log("setUserInfo:",e.userInfo)},logout:function(e){localStorage.setItem("userInfo","{}"),oe(e),e.menus=ie(qe,se,e.userInfo)},hideMenu:function(e,t){e.hideMenu="boolean"==typeof t?t:!e.hideMenu},changeBgColor:function(e,t){"string"==typeof t&&(e.backgroundColor=t)},setMenu:function(e,t){Array.isArray(t)&&(e.menus=t)}};r.default.use(X.a);var ce=new X.a.Store({state:{userInfo:{isLogin:!1,data:{userName:"",role:"",uid:""}},hideMenu:!0,backgroundColor:"#0084FF",menus:[]},mutations:le,actions:{setUserInfo:function(e,t){e.commit("setUserInfo",t)}}}),ue={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var de=a("VU/8")({methods:{resMsg:function(e,t,a){e.data&&e.data.status?this.$message({message:t||"操作成功！",showClose:!0,type:"success"}):this.$message({message:e.data.msg||a||"操作失败",showClose:!0,type:"error"})},handleError:function(e,t,a){this.$message({type:"error",message:e||"操作失败"})}}},ue,!1,function(e){a("nfd/")},null,null).exports,fe={mixins:[de],computed:{userInfo:function(){return ce.state.userInfo}},data:function(){return{username:"",password:"",selectedRole:"3",roles:{"学生":"3","教师":"2","管理员":"1"}}},watch:{username:function(e){this.username=this.$utils.trim(e)},password:function(e){this.password=this.$utils.trim(e)}},methods:{toPassword:function(){this.$router.push({path:"/password"})},submit:function(){var e=this;return w()(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.username&&e.password){t.next=3;break}return e.$message({message:"用户名和密码不能为空",showClose:!0,type:"error"}),t.abrupt("return");case 3:return t.next=5,S(e.username,e.password,e.selectedRole);case 5:a=t.sent,e.resMsg(a,"登陆成功","登陆失败"),a.data.status?(e.$store.commit("setUserInfo",a.data),e.jumpOut(+e.userInfo.data.role)):e.$store.commit("logout");case 8:case"end":return t.stop()}},t,e)}))()},jumpOut:function(e){switch(e){case 1:this.$router.push("/studentinfo");break;case 2:this.$router.push("/markgrade");break;case 3:this.$router.push("/mygrade");break;default:this.$message("权限信息缺失")}}}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:22}},[a("section",{staticClass:"login-card"},[a("h2",[a("span",[e._v("登录")])]),e._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"main_form-item"},[e._v("\n            用户名：\n            "),a("el-input",{attrs:{clearable:!0,placeholder:"请输入用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("div",{staticClass:"main_form-item"},[e._v("\n            密码：\n            "),a("el-input",{attrs:{clearable:!0,type:"password",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),a("div",{staticClass:"main_form-item"},[a("div",[e._v("选择身份：")]),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"选择身份"},model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}},e._l(e.roles,function(e,t){return a("el-option",{key:e,attrs:{value:e,label:t}})}),1)],1),e._v(" "),a("div",{staticClass:"main_form-item"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("登录")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.toPassword}},[e._v("\n              修改密码\n            ")])],1)])])])],1)],1)},staticRenderFns:[]};var pe=a("VU/8")(fe,me,!1,function(e){a("OtUf")},"data-v-4fb2d928",null).exports,he={mixins:[de],data:function(){return{selectedRole:"2",oldPassword:"",newPassword:"",secondNewPassword:""}},watch:{oldPassword:function(e){this.oldPassword=this.$utils.trim(e)},newPassword:function(e){this.newPassword=this.$utils.trim(e)},secondNewPassword:function(e){this.secondNewPassword=this.$utils.trim(e)}},methods:{submit:function(){var e=this;return w()(g.a.mark(function t(){var a,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.oldPassword){t.next=4;break}e.$message({showClose:!0,message:"请输入旧密码",type:"error"}),t.next=26;break;case 4:if(e.newPassword){t.next=8;break}e.$message({showClose:!0,message:"请输入新密码",type:"error"}),t.next=26;break;case 8:if(e.secondNewPassword){t.next=12;break}e.$message({showClose:!0,message:"请再次新旧密码",type:"error"}),t.next=26;break;case 12:if(e.newPassword===e.secondNewPassword){t.next=16;break}e.$message({showClose:!0,message:"两次密码输入不一致",type:"error"}),t.next=26;break;case 16:if(e.oldPassword!==e.newPassword){t.next=20;break}e.$message({showClose:!0,message:"新老密码不能相同",type:"error"}),t.next=26;break;case 20:return a=ce.state.userInfo.data,t.next=23,k({id:a.id||a.uid,userName:a.userName,role:a.role,password:e.newPassword,oldPassword:e.oldPassword});case 23:r=t.sent,e.resMsg(r,"修改成功，请重新登录","修改失败"),r&&r.data&&r.data.status&&e.toLogin();case 26:case"end":return t.stop()}},t,e)}))()},toLogin:function(){this.$store.commit("logout"),this.$router.push("/login")}}},ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:22}},[a("section",{staticClass:"passwd-card"},[a("h2",{staticClass:"header"},[a("span",[e._v("修改密码")])]),e._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"main_form-item"},[e._v("\n            旧密码：\n            "),a("el-input",{attrs:{type:"password",clearable:!0,autocomplete:"off",placeholder:"请输入旧用户密码"},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}})],1),e._v(" "),a("div",{staticClass:"main_form-item"},[e._v("\n            新密码：\n            "),a("el-input",{attrs:{clearable:!0,type:"password",autocomplete:"off",placeholder:"请输入新密码"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1),e._v(" "),a("div",{staticClass:"main_form-item"},[e._v("\n            再次输入新密码：\n            "),a("el-input",{attrs:{clearable:!0,type:"password",autocomplete:"off",placeholder:"请再次输入新密码"},model:{value:e.secondNewPassword,callback:function(t){e.secondNewPassword=t},expression:"secondNewPassword"}})],1),e._v(" "),a("div",{staticClass:"main_form-item"},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.submit}},[e._v("确认修改")])],1)])])])],1)],1)},staticRenderFns:[]};var ge=a("VU/8")(he,ve,!1,function(e){a("3w8l")},"data-v-71b4ec4c",null).exports,be={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  答辩数据展示\n")])},staticRenderFns:[]};var we=a("VU/8")({watch:{},computed:{},data:function(){return{}},methods:{},created:function(){}},be,!1,function(e){a("F1ro")},"data-v-e066fc58",null).exports,_e={watch:{},computed:{},data:function(){return{isHandelAdd:!0,dialogFormVisible:!1,tableData:[],form:{}}},methods:{handleEdit:function(e,t,a){console.log(e,t),this.dialogFormVisible=!0,this.isHandelAdd=!1,a&&a(e,t)},handleDelete:function(e,t,a,r){var n=this;console.log(e,t),this.$confirm("确认删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a&&a(e,t)}).catch(function(){r&&r(e,t),n.$message({type:"info",message:"已取消删除"})})},handleAdd:function(e){this.dialogFormVisible=!0,this.isHandelAdd=!0,e&&e()},setForm:function(e,t){this.form.name=t&&t.name,this.form.remark=t&&t.remark},clearForm:function(){this.form={}}},created:function(){}},xe={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var ye=a("VU/8")(_e,xe,!1,function(e){a("Z7fq")},null,null).exports,ke={mixins:[ye,de],watch:{currentPage:function(){this.getSelfGroupGrade()}},computed:{userInfo:function(){return this.$store.state.userInfo}},data:function(){return{groupGradeDatas:[],currentPage:1,pages:0,selectedStudentInfos:[]}},methods:{submit:function(){var e=this;0!==this.selectedStudentInfos.length?this.$confirm("确认批准选中项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(w()(g.a.mark(function t(){var a,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.selectedStudentInfos.map(function(e){return e.id}).join(","),t.next=3,G(a);case 3:r=t.sent,e.resMsg(r,"审核成功","审核失败"),r&&r.data&&r.data.status&&(e.getSelfGroupGrade(),e.selectedStudentInfos=[]);case 6:case"end":return t.stop()}},t,e)}))):this.$message({message:"请至少选中一条信息",type:"warning"})},getSelfGroupGrade:function(){var e=this;return w()(g.a.mark(function t(){var a,r,n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.userInfo,r=a&&a.data&&a.data.uid){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,A(r,e.currentPage);case 6:(n=t.sent)&&n.data&&n.data.status&&(e.$set(e.groupGradeDatas,e.currentPage,n.data.data.list),e.pages=n.data.data.pages);case 8:case"end":return t.stop()}},t,e)}))()},handleSelectionChange:function(e){this.selectedStudentInfos=e,console.log(e)}},created:function(){this.getSelfGroupGrade()}},Ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-card",[a("header",{attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$route.name)+"\n    ")]),e._v(" "),a("p",{staticClass:"condition"},[a("span",{staticClass:"condition-item"},[e._v("审核人:")]),e._v(" "),a("el-tag",{staticClass:"condition-item",attrs:{type:"success"}},[e._v(e._s(e.userInfo.data.userName))])],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:e.submit}},[e._v("\n      批准选中项\n    ")]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",data:e.groupGradeDatas[e.currentPage]},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"studentName",label:"学生姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalScore",label:"学生总分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createBy",label:"评分人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(0==+t.row.status?"未审核":"已审核")+"\n        ")]}}])})],1),e._v(" "),a("el-row",{staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":10,total:10*e.pages,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)},staticRenderFns:[]};var Se=a("VU/8")(ke,Ie,!1,function(e){a("lveL")},"data-v-6bdddae3",null).exports,$e=a("MICi"),Ce=a.n($e),Pe={mixins:[ye,de],computed:{userInfo:function(){return this.$store.state.userInfo}},data:function(){return{subjectDatas:[],studentDatas:[],tableData:[],scoreForm:{},totalScore:0,currentStudentInfo:{}}},methods:{openMarkGradePanel:function(e,t){var a=this.scoreForm;ne()(a).map(function(e){a[e]=""}),1!==t.status?(this.dialogFormVisible=!0,this.currentStudentInfo=t,console.log(" this.currentStudentInfo",this.currentStudentInfo)):this.$message({message:"该同学已打分",type:"warn"})},submit:function(){for(var e=this,t=this.subjectDatas,a=0;a<t.length;a++){var r=this.scoreForm[t[a].subjectName];if(""===r)return void this.$message({message:t[a].subjectName+"分数不能为空",type:"error"});if(Ce()(+r))return void this.$message({message:t[a].subjectName+"的分数格式不正确",type:"error"});if(r>t[a].subjectScore)return void this.$message({message:t[a].subjectName+"的分数超过了分数上限",type:"error"});if(+this.totalScore>100)return void this.$message({message:"总分不能超过100分",type:"error"})}this.$confirm("提交分数后分数将无法修改，确认提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(w()(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E({studentId:e.currentStudentInfo.studentId,studentName:e.currentStudentInfo.studentName,totalScore:+e.totalScore,createBy:e.userInfo.data.uid||""});case 2:a=t.sent,e.resMsg(a,"评分成功","评分失败"),a&&a.data&&a.data.status&&(e.dialogFormVisible=!1,e.getMyStudents());case 5:case"end":return t.stop()}},t,e)})))},computeTotalScore:function(e){var t=this.scoreForm,a=0;ne()(t).map(function(e,r,n){var s=t[e];"number"!=typeof+s||Ce()(s)||(a+=+s),r===n.length-1&&(a/=n.length)}),this.totalScore=Math.round(a)},getAllsubject:function(){var e=this;return w()(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:(a=t.sent)&&a.data&&a.data.status&&(e.subjectDatas=a.data.data,a.data.data.map(function(t){e.$set(e.scoreForm,t.subjectName,"")})),console.log("all subject",a.data.data);case 5:case"end":return t.stop()}},t,e)}))()},handleEdit:function(e,t){this.dialogFormVisible=!0,console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},getMyStudents:function(){var e=this;return w()(g.a.mark(function t(){var a,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.userInfo&&e.userInfo.data,console.log("userData",a),a){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,q(a.uid,1);case 6:if(!(r=t.sent)||!r.data||!1!==r.data.status){t.next=12;break}return e.$message({message:r.data.msg||"查询学生信息失败",type:"error"}),t.abrupt("return");case 12:e.studentDatas=r.data.data.list;case 13:console.log("myStudent",r.data.data);case 14:case"end":return t.stop()}},t,e)}))()}},created:function(){this.getAllsubject(),this.getMyStudents()}},Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-card",[a("header",{attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$route.name)+"\n    ")]),e._v(" "),a("p",{staticClass:"condition"},[a("span",[e._v("评分教师：")]),e._v(" "),a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.userInfo.data.userName))])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.studentDatas}},[a("el-table-column",{attrs:{label:"学生姓名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.studentName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"studentName",label:"是否已评分",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v("\n              "+e._s(1===t.row.status?"已评分":"未评分")+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.openMarkGradePanel(t.$index,t.row)}}},[e._v("评分")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"学生评分",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{"label-position":"left","label-width":"100px"}},[e._l(e.subjectDatas,function(t,r){return a("el-form-item",{key:r,attrs:{label:t.subjectName+":"}},[a("el-input",{attrs:{placeholder:"请输入分数",autocomplete:"off"},on:{change:function(a){return e.computeTotalScore(t)}},model:{value:e.scoreForm[t.subjectName],callback:function(a){e.$set(e.scoreForm,t.subjectName,a)},expression:"scoreForm[val.subjectName]"}}),e._v(" "),a("el-tag",{attrs:{type:"info"}},[e._v("最高"+e._s(t.subjectScore)+"分")])],1)}),e._v(" "),a("el-form-item",{attrs:{label:"总分"}},[a("el-input",{attrs:{readonly:""},model:{value:e.totalScore,callback:function(t){e.totalScore=t},expression:"totalScore"}})],1)],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var Fe=a("VU/8")(Pe,Ne,!1,function(e){a("3UTd")},"data-v-4c40c486",null).exports,Te={mixins:[ye,de],watch:{},computed:{},data:function(){return{form:{selectedSubjectName:"",selectedSubjectScore:"",id:void 0}}},methods:{deleteItem:function(e,t){var a=this;return w()(g.a.mark(function e(){var r,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.id)||a.handleError(),e.next=4,R(+r);case 4:n=e.sent,a.resMsg(n,"得分项删除成功","得分项删除失败"),a.initProjectInfo();case 7:case"end":return e.stop()}},e,a)}))()},submit:function(){var e=this;return w()(g.a.mark(function t(){var a,r,n,s,o,i;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.form,r=a.id,n=a.selectedSubjectName,s=a.selectedSubjectScore,e.formValidate()){t.next=3;break}return t.abrupt("return");case 3:if(!e.isHandelAdd){t.next=10;break}return t.next=6,T(n,+s);case 6:o=t.sent,e.resMsg(o,"添加成功","添加失败"),t.next=14;break;case 10:return t.next=12,D(+r,+s);case 12:i=t.sent,e.resMsg(i,"修改成功","修改失败");case 14:e.dialogFormVisible=!1,e.initProjectInfo();case 16:case"end":return t.stop()}},t,e)}))()},initProjectInfo:function(){var e=this;return w()(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:(a=t.sent)&&a.data&&a.data.status&&(e.tableData=a.data.data),console.log("projectDatas",e.tableData);case 5:case"end":return t.stop()}},t,e)}))()},setForm:function(e,t){var a=this;return w()(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.form.selectedSubjectName=t&&t.subjectName,a.form.selectedSubjectScore=t&&t.subjectScore,a.form.id=t&&t.id;case 3:case"end":return e.stop()}},e,a)}))()},clearForm:function(){var e=this;ne()(this.form).map(function(t){e.form[t]=void 0})},formValidate:function(){var e=this.form,t=(e.id,e.selectedSubjectName),a=e.selectedSubjectScore;return!(!t||!a)||(this.$message({message:"得分项名称和得分项分值不能为空！",showClose:!0,type:"error"}),!1)}},created:function(){this.initProjectInfo()}},je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$route.name)+"\n    ")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.handleAdd(e.clearForm)}}},[e._v("新增")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"subjectName",label:"得分项名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"subjectScore",label:"得分项分值",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row,e.setForm)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row,e.deleteItem)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.isHandelAdd?"新增得分项":"修改得分项信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"得分项名称:"}},[e.isHandelAdd?a("el-input",{attrs:{placeholder:"请输入得分项名称"},model:{value:e.form.selectedSubjectName,callback:function(t){e.$set(e.form,"selectedSubjectName",t)},expression:"form.selectedSubjectName"}}):a("el-select",{attrs:{filterable:"","default-first-option":""},model:{value:e.form.selectedSubjectName,callback:function(t){e.$set(e.form,"selectedSubjectName",t)},expression:"form.selectedSubjectName"}},e._l(e.tableData,function(e,t){return a("el-option",{key:t,attrs:{label:e.subjectName,value:e.subjectName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"得分项分值:"}},[a("el-input",{staticStyle:{width:"222px"},attrs:{placeholder:"请输入得分项分值"},model:{value:e.form.selectedSubjectScore,callback:function(t){e.$set(e.form,"selectedSubjectScore",t)},expression:"form.selectedSubjectScore"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var De=a("VU/8")(Te,je,!1,function(e){a("UMjh")},"data-v-afe435ea",null).exports,Re={data:function(){return{tableData:[{name:"",totalScore:"",remark:""}]}},created:function(){this.getInfo()},methods:{getInfo:function(){var e=this;return w()(g.a.mark(function t(){var a,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.$store.state.userInfo).isLogin){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,L(a.data.id||a.data.uid);case 5:r=t.sent,console.log(r),r&&r.data&&r.data.status?(console.log("this.tableData",e.tableData),e.$set(e.tableData,0,r.data.data)):e.$message("查询信息失败");case 8:case"end":return t.stop()}},t,e)}))()}}},Le={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[this._v("\n      "+this._s(this.$route.name)+"\n    ")]),this._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData}},[t("el-table-column",{attrs:{prop:"name",label:"学生姓名",width:"180"}}),this._v(" "),t("el-table-column",{attrs:{prop:"totalScore",label:"答辩总分",width:"180"}}),this._v(" "),t("el-table-column",{attrs:{prop:"remark",label:"备注",width:"180"}})],1)],1)},staticRenderFns:[]};var Me=a("VU/8")(Re,Le,!1,function(e){a("RS6I")},null,null).exports,Ue={mixins:[ye,de],watch:{selectedTeacherId:function(e){this.getGroupDataByTeacherId(e),console.log("selectedTeacherId",e)},selectedStudentIds:function(e){}},computed:{groupTeacherName:function(){return this.groupDatas.info.teacherName||"未指定教师"},groupLeaderName:function(){return this.groupDatas.info.leaderName||"未指定组长"}},data:function(){return{excelFile:void 0,teacherDatas:[],studentDatas:[],selectedTeacherId:"",selectedStudentIds:[],isAddStudent:!1,groupDatas:{info:{teacherName:"",teacherId:"",leaderName:"",leaderId:""},list:[]}}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("最多上传一个文件")},setForm:function(e,t){this.form.name=t&&t.name,this.form.remark=t&&t.remark},clearForm:function(){var e=this;ne()(this.form).map(function(t){e.form[t]=void 0})},getAllTeacher:function(){var e=this;return w()(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(null,null,1);case 2:(a=t.sent)&&a.data&&a.data.status?e.teacherDatas=a.data.data.list:e.handleError("教师列表获取失败");case 4:case"end":return t.stop()}},t,e)}))()},getAllUnGroupStudent:function(){var e=this;return w()(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z();case 2:(a=t.sent)&&a.data&&a.data.status?e.studentDatas=a.data.data.list:e.handleError("学生列表获取失败");case 4:case"end":return t.stop()}},t,e)}))()},getGroupDataByTeacherId:function(e){var t=this;return w()(g.a.mark(function a(){var r;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q(e,1);case 2:(r=a.sent)&&r.data&&r.data.status?(r.data.data&&r.data.data.list.length>0?(t.$set(t.groupDatas,"list",r.data.data.list),t.$set(t.groupDatas,"info",r.data.data.list[0])):(t.$set(t.groupDatas,"list",[]),t.$set(t.groupDatas,"info",{})),console.log("groupDatas",t.groupDatas)):t.handleError("分组信息获取失败");case 4:case"end":return a.stop()}},a,t)}))()},addStudentsToGroup:function(){var e=this;this.selectedTeacherId?0!==this.selectedStudentIds.length?this.$confirm("确认将该学生添加到分组?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(w()(g.a.mark(function t(){var a,r,n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.selectedTeacherId,r=e.selectedStudentIds.join(","),t.next=4,J(a,r);case 4:n=t.sent,e.resMsg(n,"添加成功","添加失败"),n&&n.data&&n.data.status&&(e.resetUnGroupStudents(),e.getGroupDataByTeacherId(e.selectedTeacherId));case 7:case"end":return t.stop()}},t,e)}))):this.$message({message:"请至少选择一名学生",type:"warning"}):this.$message({message:"请选择一名教师",type:"warning"})},removeStudent:function(e,t){var a=this;this.$confirm("确认将该学生从分组中移出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(w()(g.a.mark(function e(){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t.id);case 2:r=e.sent,a.resMsg(r,"成功将"+t.studentName+"移出分出","移出失败"),r&&r.data&&r.data.status&&(a.resetUnGroupStudents(),a.getGroupDataByTeacherId(a.selectedTeacherId));case 5:case"end":return e.stop()}},e,a)})))},resetUnGroupStudents:function(){this.selectedStudentIds=[],this.getAllUnGroupStudent()},outputGroupInfo:function(){var e=this;this.selectedTeacherId?this.$confirm("确认导出小组信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){H(e.selectedTeacherId).then(function(t){if(t&&t.data&&!1===t.data.status)e.$message({message:t.data.msg||"导出错误",type:"error"});else{var a=new Blob([t.data]),r=document.createElement("a"),n=window.URL.createObjectURL(a);r.href=n,r.download="小组成绩.xlsx",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),console.log("response",t)}}).catch(function(e){console.log(e)})}):this.$message({message:"必须选择一个教师分组",type:"error"})}},created:function(){this.getAllTeacher(),this.getAllUnGroupStudent()}},Ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$route.name)+"\n    ")]),e._v(" "),a("section",{staticClass:"condition"},[a("label",{attrs:{for:""}},[e._v("\n        选择答辩小组：\n        "),a("el-select",{staticClass:"condition-item",attrs:{filterable:"",size:"mini",placeholder:"请选择教师分组"},model:{value:e.selectedTeacherId,callback:function(t){e.selectedTeacherId=t},expression:"selectedTeacherId"}},e._l(e.teacherDatas,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){e.isAddStudent=!e.isAddStudent}}},[e._v("\n        "+e._s(e.isAddStudent?"取消":"为分组添加学生"))]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.outputGroupInfo}},[e._v("\n        导出小组信息")])],1),e._v(" "),e.isAddStudent?a("section",{staticClass:"margintop"},[a("el-select",{staticClass:"select-student",attrs:{size:"mini",multiple:"",filterable:"",placeholder:"请选择要加入分组的学生"},model:{value:e.selectedStudentIds,callback:function(t){e.selectedStudentIds=t},expression:"selectedStudentIds"}},e._l(e.studentDatas,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("div",[a("el-button",{staticClass:"margintop",attrs:{size:"mini",type:"primary"},on:{click:e.addStudentsToGroup}},[e._v("\n          添加已选中学生\n        ")])],1)],1):e._e(),e._v(" "),a("hr"),e._v(" "),a("section",[a("p",{staticClass:"condition"},[a("span",{staticClass:"label"},[e._v("答辩教师:")]),e._v(" "),a("el-tag",{staticClass:"label-value",attrs:{type:e.groupDatas.info.teacherName?"success":"info"}},[e._v(e._s(e.groupTeacherName))])],1),e._v(" "),a("p",{staticClass:"condition"},[a("span",{staticClass:"label"},[e._v("答辩教师组长:")]),e._v(" "),a("el-tag",{staticClass:"label-value",attrs:{type:e.groupDatas.info.leaderName?"success":"info"}},[e._v(e._s(e.groupLeaderName))])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:e.groupDatas.list}},[a("el-table-column",{attrs:{prop:"studentName",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row,e.removeStudent)}}},[e._v("从分组中移除")])]}}])})],1)],1)])],1)},staticRenderFns:[]};var ze={mixins:[ye,de],watch:{currentPage:function(e){this.getStudentInfo(e)},orderType:function(e){this.currentPage=1,this.getStudentInfo(this.currentPage)},displayRule:function(e){console.log(e),this.currentPage=1,this.getStudentInfo(this.currentPage)}},computed:{userInfo:function(){return this.$store.state.userInfo}},data:function(){return{form:{id:"",name:"",password:"",totalScore:"",remark:""},excelFile:void 0,currentPage:1,displayRule:1,orderType:2,pages:0}},methods:{deleteStudent:function(e,t){var a=this;return w()(g.a.mark(function e(){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t.id);case 2:r=e.sent,a.resMsg(r,"删除成功","删除失败"),r&&r.data&&r.data.status&&a.getStudentInfo(a.currentPage);case 5:case"end":return e.stop()}},e,a)}))()},outputScore:function(){var e=this;this.$confirm("确认导出学生成绩, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){B().then(function(t){if(t&&t.data&&!1===t.data.status)e.$message({message:t.data.msg||"导出错误",type:"error"});else{var a=new Blob([t.data]),r=document.createElement("a"),n=window.URL.createObjectURL(a);r.href=n,r.download="学生成绩.xlsx",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),console.log("response",t)}}).catch(function(e){console.log(e)})})},submit:function(){var e=this;return w()(g.a.mark(function t(){var a,r,n,s,o;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dialogFormVisible=!1,a=e.form,r=a.name,n=a.password,a.remark,!e.isHandelAdd){t.next=16;break}if(r&&n){t.next=8;break}return e.$message({message:"姓名和密码不能为空",showClose:!0,type:"error"}),t.abrupt("return");case 8:return t.next=10,V(e.form);case 10:s=t.sent,console.log("注册信息",e.form),e.resMsg(s,"注册成功","注册失败"),s&&s.data&&s.data.status&&e.getStudentInfo(e.currentPage);case 14:t.next=27;break;case 16:if(r){t.next=21;break}return e.$message({message:"姓名不能为空",showClose:!0,type:"error"}),t.abrupt("return");case 21:return e.form.password=void 0,t.next=24,U(e.form);case 24:o=t.sent,e.resMsg(o,"修改成功","修改失败"),o&&o.data&&o.data.status&&e.getStudentInfo(e.currentPage);case 27:case"end":return t.stop()}},t,e)}))()},setForm:function(e,t){this.form.id=t&&t.id,this.form.name=t&&t.name,this.form.remark=t&&t.remark,this.form.totalScore=t&&t.totalScore},clearForm:function(){var e=this;ne()(this.form).map(function(t){e.form[t]=void 0})},uploadSuccess:function(e,t,a){e&&(console.log("fileList,",a),this.$refs.upload.clearFiles(),e.status?(this.$message({message:e.msg||"文件上传成功",showClose:!0,type:"success"}),this.getStudentInfo(this.currentPage)):this.$message({message:e.msg||"文件上传失败",showClose:!0,type:"error"}))},getStudentInfo:function(e){var t=this;return w()(g.a.mark(function a(){var r,n;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r={page:e,orderType:t.orderType},a.t0=t.displayRule,a.next=1===a.t0?4:2===a.t0?5:3===a.t0?7:9;break;case 4:return a.abrupt("break",9);case 5:return r.start=60,a.abrupt("break",9);case 7:return r.end=59,a.abrupt("break",9);case 9:return a.next=11,z(r);case 11:(n=a.sent)&&n.data&&n.data.status?(console.log("getAllStudentInfo",n.data.data.list),t.pages=n.data.data.pages,t.$set(t.tableData,e,n.data.data.list)):t.$message({message:"查询失败",showClose:!0,type:"error"});case 13:case"end":return a.stop()}},a,t)}))()},handleOrder:function(){2===this.orderType?this.orderType=1:this.orderType=2}},created:function(){this.getStudentInfo(this.currentPage)}},Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("header",{attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$route.name)+"\n    ")]),e._v(" "),a("div",{staticClass:"condition"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.userInfo.data&&1==+e.userInfo.data.role,expression:"userInfo.data && +userInfo.data.role === 1"}],staticClass:"condition-item",attrs:{type:"success",size:"mini"},on:{click:function(t){return e.handleAdd(e.clearForm)}}},[e._v("新增学生")]),e._v(" "),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:e.userInfo.data&&1==+e.userInfo.data.role,expression:"userInfo.data && +userInfo.data.role === 1"}],ref:"upload",staticClass:"condition-item",attrs:{action:"http://45.40.192.128/platform/api/studentUser/dataImport","show-file-list":!1,"on-success":e.uploadSuccess,"file-list":e.excelFile,limit:1}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("excel批量导入")])],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.outputScore}},[e._v("导出成绩")])],1),e._v(" "),a("div",{staticClass:"condition margintop",style:{margin:"20px 0"}},[a("el-radio",{staticClass:"condition-item",attrs:{label:1},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},[e._v("升序")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},[e._v("降序")]),e._v(" "),a("el-radio",{staticClass:"condition-item",attrs:{label:1},model:{value:e.displayRule,callback:function(t){e.displayRule=t},expression:"displayRule"}},[e._v("所有")]),e._v(" "),a("el-radio",{staticClass:"condition-item",attrs:{label:2},model:{value:e.displayRule,callback:function(t){e.displayRule=t},expression:"displayRule"}},[e._v("通过答辩")]),e._v(" "),a("el-radio",{attrs:{label:3},model:{value:e.displayRule,callback:function(t){e.displayRule=t},expression:"displayRule"}},[e._v("未通过答辩")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData[e.currentPage]}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"totalScore",label:"答辩总分"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.userInfo.data&&(1==+e.userInfo.data.role||0==+e.userInfo.data.teacherRole),expression:"userInfo.data && (+userInfo.data.role === 1 || +userInfo.data.teacherRole === 0)"}],attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row,e.setForm)}}},[e._v("修改")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.userInfo.data&&1==+e.userInfo.data.role,expression:"userInfo.data && +userInfo.data.role === 1"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row,e.deleteStudent)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-row",{staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":10,total:10*e.pages,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.isHandelAdd?"新增学生信息":"修改学生信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"学生姓名:"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入学生姓名",readonly:e.userInfo.data&&0===e.userInfo.data.teacherRole},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isHandelAdd,expression:"isHandelAdd"}],attrs:{label:"密码:"}},[a("el-input",{attrs:{"show-password":"",autocomplete:"off",placeholder:"请输入登录密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入学生备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.isHandelAdd&&e.form.totalScore&&!1,expression:"!isHandelAdd && form.totalScore && false"}],attrs:{label:"分数:"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"学生成绩"},model:{value:e.form.totalScore,callback:function(t){e.$set(e.form,"totalScore",t)},expression:"form.totalScore"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var Ae={extends:ye,watch:{},computed:{},data:function(){return{excelFile:void 0}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("最多上传一个文件")},setForm:function(e,t){this.form.name=t&&t.name,this.form.remark=t&&t.remark},clearForm:function(){var e=this;ne()(this.form).map(function(t){e.form[t]=void 0})}},created:function(){this.tableData=[{date:"2016-05-02",name:"王小虎"},{date:"2016-05-04",name:"王小虎"},{date:"2016-05-01",name:"王小虎"},{date:"2016-05-03",name:"王小虎"}]}},Ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$route.name)+"\n    ")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.handleAdd(e.clearForm)}}},[e._v("新增")]),e._v(" "),a("el-upload",{staticClass:"margintop",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"file-list":e.excelFile,limit:1}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("通过excel批量导入")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row,e.setForm)}}},[e._v("修改信息")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("Delete")])]}}])})],1),e._v(" "),a("el-row",{staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:10}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.isHandelAdd?"新增学生信息":"修改学生信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"学生姓名:"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入学生姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入学生备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var Be={mixins:[ye,de],watch:{currentPage:function(e){this.getTeacherInfoByPage(e)},leaderIndex:function(e){this.leadersData[e]&&(this.form.leaderName=this.leadersData[e].name,this.form.leaderId=this.leadersData[e].id)}},data:function(){return{form:{id:"",name:"",password:"",isLeader:"",leaderId:"",leaderName:"",role:""},leaderIndex:void 0,excelFile:void 0,currentPage:1,rawDatas:null,leadersData:[],alreadyIsLeader:!1,pages:0}},methods:{deleteTeacher:function(e,t){var a=this;return w()(g.a.mark(function e(){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t.id);case 2:r=e.sent,a.resMsg(r,"删除成功","删除失败"),r&&r.data&&r.data.status&&a.getTeacherInfoByPage(a.currentPage);case 5:case"end":return e.stop()}},e,a)}))()},getLeaderData:function(){var e=this;return w()(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:(a=t.sent)&&a.data&&a.data.data&&(e.leadersData=a.data.data);case 4:case"end":return t.stop()}},t,e)}))()},submit:function(){var e=this;return w()(g.a.mark(function t(){var a,r,n,s,o,i,l,c,u,d;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.form,r=a.id,n=a.name,s=a.password,o=a.role,i=a.isLeader,l=a.leaderName,c=a.leaderId,!e.isHandelAdd){t.next=19;break}if(n&&s){t.next=7;break}return e.$message({message:"姓名、密码不能为空",showClose:!0,type:"error"}),t.abrupt("return");case 7:if("否"!==o||"否"!==i||l){t.next=12;break}return e.$message({message:"请选择一名组长",showClose:!0,type:"error"}),t.abrupt("return");case 12:return t.next=14,P({name:n,password:s,role:"是"===o?0:1,isLeader:"是"===i?1:0,leaderName:l,leaderId:c});case 14:u=t.sent,e.resMsg(u,"注册成功","注册失败"),u&&u.data&&u.data.status&&(e.getLeaderData(),e.getTeacherInfoByPage(e.currentPage),e.dialogFormVisible=!1);case 17:t.next=35;break;case 19:if(n){t.next=24;break}return e.$message({message:"姓名不能为空",showClose:!0,type:"error"}),t.abrupt("return");case 24:if("否"!==i||"-"!==l){t.next=29;break}return e.$message({message:"请选择一名组长",showClose:!0,type:"error"}),t.abrupt("return");case 29:return e.form.password=void 0,t.next=32,F({id:r,name:n,role:"是"===o?0:1,isLeader:"是"===i?1:0,leaderName:"-"===l?void 0:l});case 32:d=t.sent,e.resMsg(d,"修改成功","修改失败"),d&&d.data&&d.data.status&&(e.getTeacherInfoByPage(e.currentPage),e.dialogFormVisible=!1);case 35:case"end":return t.stop()}},t,e)}))()},setForm:function(e,t){var a=this;this.form.id=t&&t.id,this.form.name=t&&t.name,this.form.isLeader=t&&t.isLeader,this.alreadyIsLeader=t&&t.isLeader,this.form.leaderName=t&&t.leaderName,this.form.role=t&&t.role,this.leadersData.map(function(e,r){e.name===t.leaderName&&(a.leaderIndex=r)})},clearForm:function(){var e=this;ne()(this.form).map(function(t){e.form[t]=void 0}),this.form.role="否",this.form.isLeader="否",this.leaderIndex=void 0},uploadSuccess:function(e,t,a){e&&(this.$refs.upload.clearFiles(),e.status?(this.$message({message:e.msg||"文件上传成功",showClose:!0,type:"success"}),this.getTeacherInfoByPage(this.currentPage)):this.$message({message:e.msg||"文件上传失败",showClose:!0,type:"error"}))},getTeacherInfoByPage:function(e){var t=this;return w()(g.a.mark(function a(){var r,n;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$(null,e);case 2:r=a.sent,t.pages=r.data.data.pages,n=r.data.data.list,console.log("getTeacherInfoByPage",n),n.map(function(e){e.role=1===e.role?"否":"是",e.isLeader=1===e.isLeader?"是":"否",e.leaderName=e.leaderName||"-"}),r&&r.data&&r.data.status?t.$set(t.tableData,e,r.data.data.list):t.$message({message:"查询失败",showClose:!0,type:"error"});case 8:case"end":return a.stop()}},a,t)}))()}},created:function(){this.getTeacherInfoByPage(this.currentPage),this.getLeaderData()}},He={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$route.name)+"\n    ")]),e._v(" "),a("section",{staticClass:"condition"},[a("el-button",{staticClass:"condition-item",attrs:{type:"success",size:"mini"},on:{click:function(t){return e.handleAdd(e.clearForm)}}},[e._v("新增教师")]),e._v(" "),a("el-upload",{ref:"upload",staticClass:"condition-item",attrs:{action:"http://45.40.192.128/platform/api/teacher/dataImport","show-file-list":!1,"on-success":e.uploadSuccess,"file-list":e.excelFile,limit:1}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("通过excel批量导入")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData[e.currentPage]}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isLeader",label:"是否组长",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leaderName",label:"组长名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role",label:"是否辅导员",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row,e.setForm)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row,e.deleteTeacher)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-row",{staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":10,total:10*e.pages,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.isHandelAdd?"新增教师":"修改教师信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名:"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isHandelAdd,expression:"isHandelAdd"}],attrs:{label:"密码:"}},[a("el-input",{attrs:{"show-password":"",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否辅导员:"}},[a("el-select",{model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[a("el-option",{attrs:{value:"是"}},[e._v("是")]),e._v(" "),a("el-option",{attrs:{value:"否"}},[e._v("否")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"否"===e.form.role,expression:"form.role === '否'"}]},[a("el-form-item",{attrs:{label:"是否组长："}},[a("el-select",{attrs:{disabled:!e.isHandelAdd&&"是"===e.form.isLeader&&"是"===e.alreadyIsLeader},model:{value:e.form.isLeader,callback:function(t){e.$set(e.form,"isLeader",t)},expression:"form.isLeader"}},[a("el-option",{attrs:{value:"是"}},[e._v("是")]),e._v(" "),a("el-option",{attrs:{value:"否"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"否"===e.form.isLeader,expression:"form.isLeader === '否'"}],attrs:{label:"选择组长:"}},[a("el-select",{attrs:{filterable:""},model:{value:e.leaderIndex,callback:function(t){e.leaderIndex=t},expression:"leaderIndex"}},e._l(e.leadersData,function(t,r){return a("el-option",{key:r,attrs:{value:r,label:t.name}},[e._v(e._s(t.name))])}),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var Oe={render:function(){var e=this.$createElement;return(this._self._c||e)("section",[this._v("\n  您没有权限访问该页面\n")])},staticRenderFns:[]};var Je={Loading:Y,Login:pe,SetPassword:ge,GradeCharts:we,GradeInfo:Se,MarkGrade:Fe,ProjectManage:De,StudentGroup:a("VU/8")(Ue,Ve,!1,function(e){a("el5A")},"data-v-2f9b293e",null).exports,StudentInfo:a("VU/8")(ze,Ge,!1,function(e){a("4zFN")},"data-v-5404c629",null).exports,TeacherClockIn:a("VU/8")(Ae,Ee,!1,function(e){a("4ouH")},"data-v-6d86ed14",null).exports,TeacherInfo:a("VU/8")(Be,He,!1,function(e){a("JNsQ")},"data-v-3356ab3a",null).exports,MyGrade:Me,NoAccess:a("VU/8")({},Oe,!1,function(e){a("TsJJ")},"data-v-9ee950aa",null).exports};r.default.use(h.a);var qe=[{path:"/",name:"loading...",component:Je.Loading},{path:"/noaccess",name:"无权访问",component:Je.NoAccess,hidden:!0},{path:"/login",name:"登录",component:Je.Login},{path:"/password",name:"修改密码",component:Je.SetPassword},{path:"/studentinfo",name:"学生信息管理",component:Je.StudentInfo},{path:"/teacherinfo",name:"教师信息管理",component:Je.TeacherInfo},{path:"/studentgroup",name:"学生分组",component:Je.StudentGroup},{path:"/projectmange",name:"得分项管理",component:Je.ProjectManage},{path:"/gradeinfo",name:"成绩审核",component:Je.GradeInfo},{path:"/gradecharts",name:"答辩情况展示",component:Je.GradeCharts},{path:"/clockingin",name:"考勤管理",component:Je.TeacherClockIn},{path:"/markgrade",name:"教师评分",component:Je.MarkGrade},{path:"/mygrade",name:"成绩查询",component:Je.MyGrade}],Ze=new h.a({routes:qe}),Qe=a("zL8q"),We=a.n(Qe),Ye=function(e,t){return e.indexOf(t.path)>-1},Xe=(a("tvR6"),{computed:x()({},Object(X.b)({backgroundColor:function(e){return e.backgroundColor}})),watch:{bgColor:function(e){this.commitBg(e)},backgroundColor:function(e){this.bgColor=e}},data:function(){return{bgColor:"#fff"}},methods:{commitBg:function(e){this.$store.commit("changeBgColor",e)}}}),Ke={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var et=a("VU/8")(Xe,Ke,!1,function(e){a("3f8G")},null,null).exports,tt={extends:et,props:{logo:String,username:{type:String,default:""}},watch:{},data:function(){return{}},methods:{emitExit:function(){this.$emit("exit")},emitMenu:function(){this.$emit("menu")}}},at={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header",style:{backgroundColor:e.backgroundColor}},[e.logo?a("span",{staticClass:"header_logo",domProps:{textContent:e._s(e.logo)}}):e._e(),e._v(" "),a("i",{staticClass:"header_menu-btn",on:{click:e.emitMenu}}),e._v(" "),a("span",{staticClass:"header_userinfo"},[e.username?a("span",[a("span",[e._v("\n        用户名："+e._s(e.username)+"\n      ")]),e._v(" "),a("span",{staticClass:"header_exit",on:{click:e.emitExit}},[e._v("退出")])]):a("span",{staticClass:"header_exit"},[a("router-link",{attrs:{to:"/login"}},[e._v("登录")])],1),e._v(" "),a("el-color-picker",{attrs:{"show-alpha":"",size:"mini"},on:{"active-change":e.commitBg},model:{value:e.bgColor,callback:function(t){e.bgColor=t},expression:"bgColor"}})],1)])},staticRenderFns:[]};var rt=a("VU/8")(tt,at,!1,function(e){a("4Mrq")},"data-v-40dc025e",null).exports,nt={extends:et,computed:x()({},Object(X.b)(["menus"]))},st={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"defence-menu",attrs:{"background-color":"#fff","default-active":"2"}},e._l(e.menus,function(t,r){return a("router-link",{key:r,attrs:{to:t.path}},[a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!val.hidden"}],attrs:{index:t.path}},[e._v("\n        "+e._s(t.name)+"\n    ")])],1)}),1)},staticRenderFns:[]};var ot=a("VU/8")(nt,st,!1,function(e){a("Cs/I")},"data-v-97b68c40",null).exports,it={mixins:[de],computed:x()({},Object(X.b)({userInfo:function(e){return e.userInfo},hideMenu:function(e){return e.hideMenu}})),components:{Header:rt,Menu:ot},data:function(){return{}},methods:{onExit:function(){var e=this;this.$confirm("确认注销账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(w()(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I();case 2:a=t.sent,e.resMsg(a,"注销成功","注销失败"),a&&a.data&&a.data.status&&(localStorage.setItem("userInfo","{}"),e.$router.push("/login"),e.$store.commit("logout"));case 5:case"end":return t.stop()}},t,e)})))},onMenu:function(e){this.$store.commit("hideMenu",e)}},created:function(){}},lt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("Header",{staticClass:"layout_header",attrs:{logo:"智慧答辩平台",username:e.userInfo.data.userName},on:{exit:e.onExit,menu:e.onMenu}}),e._v(" "),a("Menu",{staticClass:"layout_menu",class:[{hidden:e.hideMenu}]}),e._v(" "),a("section",{staticClass:"layout_main",on:{click:function(t){return e.onMenu(!0)}}},[a("router-view")],1)],1)},staticRenderFns:[]};var ct={Layout:a("VU/8")(it,lt,!1,function(e){a("DG1z")},"data-v-4dcaeeb4",null).exports};console.log("process.env.NODE_ENV","production"),r.default.use(We.a),r.default.use(function(e){ne()(ct).map(function(t){e.component(t,ct[t])})}),r.default.use(p),r.default.config.productionTip=!1,r.default.prototype.$echarts=i.a,function(e){e.prototype.$axios=c.a}(r.default),function(e){var t,a=this;e.beforeEach((t=w()(g.a.mark(function e(t,r,n){var s,o,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=ce&&ce.state&&ce.state.userInfo,o=JSON.parse(localStorage.getItem("userInfo"))||{},i=!s||s&&!s.isLogin&&!o.status,"/login"!==t.path&&"/"!==t.path){e.next=7;break}return ce.commit("setUserInfo",o),n(),e.abrupt("return");case 7:if("/login"===t.path||!i){e.next=13;break}return Object(Qe.Message)("未登录用户只能访问登录页面"),n("/login"),e.abrupt("return");case 13:ce.commit("setUserInfo",o);case 14:if(!s.isLogin){e.next=25;break}e.t0=s.data&&+s.data.role,e.next=1===e.t0?18:2===e.t0?20:3===e.t0?22:24;break;case 18:return Ye(se.adminRoutes,t)?n():n("/noaccess"),e.abrupt("break",25);case 20:return 1==+s.data.isLeader?Ye(se.leaderRoutes,t)?n():n("/noaccess"):Ye(se.teacherRoutes,t)?n():n("/noaccess"),e.abrupt("break",25);case 22:return Ye(se.studentRoutes,t)?n():n("/noaccess"),e.abrupt("break",25);case 24:n("/noaccess");case 25:n(),console.log("routerto:",t);case 27:case"end":return e.stop()}},e,a)})),function(e,a,r){return t.apply(this,arguments)}))}(Ze),new r.default({el:"#app",router:Ze,store:ce,components:{App:s},template:"<App/>"})},OJwc:function(e,t){},OtUf:function(e,t){},RPz8:function(e,t){},RS6I:function(e,t){},TsJJ:function(e,t){},UMjh:function(e,t){},Y76V:function(e,t){},Z7fq:function(e,t){},el5A:function(e,t){},lveL:function(e,t){},"nfd/":function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.29a93c72bd28569c86a1.js.map